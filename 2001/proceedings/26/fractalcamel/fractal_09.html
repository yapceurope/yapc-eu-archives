
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                 "http://www.w3.org/TR/html4/loose.dtd"> 
<html>
<head>
<title>Julia Mandelbrot: 9/9</title>
<link rel="stylesheet" type="text/css" href="yapc.css"> 
<meta name="author" content="Philippe `BooK' Bruhat">
<meta name="Generator" content="perl, vim, ttree, perltidy">
</head>
 
<body>
<h2>The "normal" program</h2>
<p>This is the program that is run when there are command-line
parameters. The batch-mode version.</p><!-- filename: perltidy -->
<PRE>
<SPAN CLASS="q"> &quot;-|=I+X#.&quot;</SPAN><SPAN CLASS="sc">;</SPAN><SPAN CLASS="p">(</SPAN><SPAN CLASS="i">$W</SPAN><SPAN CLASS="cm">,</SPAN><SPAN CLASS="i">$H</SPAN><SPAN CLASS="cm">,</SPAN><SPAN CLASS="i">$w</SPAN><SPAN CLASS="cm">,</SPAN><SPAN CLASS="i">$h</SPAN><SPAN CLASS="cm">,</SPAN><SPAN CLASS="i">$z</SPAN><SPAN CLASS="cm">,</SPAN><SPAN CLASS="i">$n</SPAN><SPAN CLASS="cm">,</SPAN><SPAN CLASS="i">$i</SPAN><SPAN CLASS="p">)</SPAN>=<SPAN CLASS="p">(</SPAN><SPAN CLASS="n">79</SPAN><SPAN CLASS="cm">,</SPAN><SPAN CLASS="n">23</SPAN><SPAN CLASS="cm">,</SPAN><SPAN CLASS="n">2</SPAN><SPAN CLASS="cm">,</SPAN><SPAN CLASS="n">2</SPAN><SPAN CLASS="cm">,</SPAN><SPAN CLASS="n">1</SPAN><SPAN CLASS="cm">,</SPAN><SPAN CLASS="n">25</SPAN><SPAN CLASS="cm">,</SPAN><SPAN CLASS="n">1</SPAN><SPAN CLASS="p">)</SPAN><SPAN CLASS="sc">;</SPAN><SPAN CLASS="q">'esrever lave;&quot;.#X+I=|-&quot; </SPAN>
<SPAN CLASS="q">'</SPAN><SPAN CLASS="sc">;</SPAN><SPAN CLASS="k">while</SPAN><SPAN CLASS="p">(</SPAN><SPAN CLASS="i">@ARGV</SPAN><SPAN CLASS="p">)</SPAN><SPAN CLASS="s">{</SPAN><SPAN CLASS="i">$</SPAN>{<SPAN CLASS="k">pop</SPAN><SPAN CLASS="i">@ARGV</SPAN>}=<SPAN CLASS="k">pop</SPAN><SPAN CLASS="s">}</SPAN><SPAN CLASS="k">do</SPAN><SPAN CLASS="s">{</SPAN><SPAN CLASS="k">while</SPAN><SPAN CLASS="p">(</SPAN><SPAN CLASS="q">/([a-z])\s*([-\d.]*)/cgi</SPAN><SPAN CLASS="p">)</SPAN><SPAN CLASS="s">{</SPAN><SPAN CLASS="i">$</SPAN>{<SPAN CLASS="i">$1</SPAN>}=<SPAN CLASS="i">$2if</SPAN><SPAN CLASS="i">$1</SPAN><SPAN CLASS="s">}</SPAN>
<SPAN CLASS="sc">;</SPAN><SPAN CLASS="c">#%)&quot;:^//@]n\n$&lt;:%z$&lt;*%a$&lt;^%A$&lt;_}y$&lt;=%x$&lt;!%h$&lt;|%w$&lt;[%j$&lt;(%H$&lt;;%W$&lt;'#qq=_$;_$=e$</SPAN>
<SPAN CLASS="i">@c</SPAN>=<SPAN CLASS="k">split</SPAN><SPAN CLASS="q">//</SPAN><SPAN CLASS="cm">,</SPAN><SPAN CLASS="i">$00</SPAN><SPAN CLASS="sc">;</SPAN><SPAN CLASS="k">for</SPAN><SPAN CLASS="p">(</SPAN><SPAN CLASS="n">1</SPAN>..<SPAN CLASS="i">$i</SPAN><SPAN CLASS="p">)</SPAN><SPAN CLASS="s">{</SPAN><SPAN CLASS="i">$w</SPAN>*=<SPAN CLASS="i">$z</SPAN><SPAN CLASS="sc">;</SPAN><SPAN CLASS="i">$h</SPAN>*=<SPAN CLASS="i">$z</SPAN><SPAN CLASS="sc">;</SPAN><SPAN CLASS="i">$A</SPAN>+=<SPAN CLASS="i">$a</SPAN><SPAN CLASS="sc">;</SPAN><SPAN CLASS="k">for</SPAN><SPAN CLASS="p">(</SPAN><SPAN CLASS="n">0</SPAN>..<SPAN CLASS="i">$H</SPAN>*<SPAN CLASS="i">$W</SPAN>-<SPAN CLASS="n">1</SPAN><SPAN CLASS="p">)</SPAN><SPAN CLASS="s">{</SPAN><SPAN CLASS="p">(</SPAN><SPAN CLASS="i">$U</SPAN><SPAN CLASS="cm">,</SPAN><SPAN CLASS="i">$R</SPAN><SPAN CLASS="cm">,</SPAN><SPAN CLASS="i">@0</SPAN><SPAN CLASS="p">)</SPAN>=<SPAN CLASS="s">(</SPAN><SPAN CLASS="w">f</SPAN><SPAN CLASS="s">(</SPAN><SPAN CLASS="i">$_</SPAN>
%<SPAN CLASS="i">$W</SPAN><SPAN CLASS="cm">,</SPAN><SPAN CLASS="k">int</SPAN><SPAN CLASS="i">$_</SPAN>/<SPAN CLASS="i">$W</SPAN><SPAN CLASS="s">)</SPAN><SPAN CLASS="cm">,</SPAN><SPAN CLASS="i">$n</SPAN><SPAN CLASS="s">)</SPAN><SPAN CLASS="sc">;</SPAN><SPAN CLASS="p">(</SPAN><SPAN CLASS="i">$p</SPAN><SPAN CLASS="cm">,</SPAN><SPAN CLASS="i">$q</SPAN><SPAN CLASS="p">)</SPAN>=<SPAN CLASS="p">(</SPAN><SPAN CLASS="i">$j</SPAN>?<SPAN CLASS="p">(</SPAN><SPAN CLASS="i">$x</SPAN><SPAN CLASS="cm">,</SPAN><SPAN CLASS="i">$y</SPAN><SPAN CLASS="p">)</SPAN><SPAN CLASS="co">:</SPAN><SPAN CLASS="p">(</SPAN><SPAN CLASS="c">#(:)y$,x$(?j$(=)q$,p$(;)n$,)W$/_$tni,W$%</SPAN>
<SPAN CLASS="i">$U</SPAN><SPAN CLASS="cm">,</SPAN><SPAN CLASS="i">$R</SPAN><SPAN CLASS="p">)</SPAN><SPAN CLASS="p">)</SPAN><SPAN CLASS="sc">;</SPAN><SPAN CLASS="k">do</SPAN><SPAN CLASS="s">{</SPAN><SPAN CLASS="p">(</SPAN><SPAN CLASS="i">$U</SPAN><SPAN CLASS="cm">,</SPAN><SPAN CLASS="i">$R</SPAN><SPAN CLASS="p">)</SPAN>=<SPAN CLASS="p">(</SPAN><SPAN CLASS="i">$U</SPAN>*<SPAN CLASS="i">$U</SPAN>-<SPAN CLASS="i">$R</SPAN>*<SPAN CLASS="i">$R</SPAN>+<SPAN CLASS="i">$p</SPAN><SPAN CLASS="cm">,</SPAN><SPAN CLASS="i">$U</SPAN>*<SPAN CLASS="n">2</SPAN>*<SPAN CLASS="i">$R</SPAN>+<SPAN CLASS="i">$q</SPAN><SPAN CLASS="p">)</SPAN><SPAN CLASS="s">}</SPAN><SPAN CLASS="k">until</SPAN><SPAN CLASS="p">(</SPAN><SPAN CLASS="p">(</SPAN><SPAN CLASS="i">$U</SPAN>*<SPAN CLASS="i">$U</SPAN>+<SPAN CLASS="i">$R</SPAN>*<SPAN CLASS="i">$R</SPAN>&gt;<SPAN CLASS="n">4</SPAN><SPAN CLASS="p">)</SPAN>||--<SPAN CLASS="i">$0</SPAN>[<SPAN CLASS="n">0</SPAN>]==
<SPAN CLASS="n">0</SPAN><SPAN CLASS="p">)</SPAN><SPAN CLASS="sc">;</SPAN><SPAN CLASS="k">print</SPAN><SPAN CLASS="i">$c</SPAN>[<SPAN CLASS="k">int</SPAN><SPAN CLASS="p">(</SPAN><SPAN CLASS="i">$0</SPAN>[<SPAN CLASS="n">0</SPAN>]*<SPAN CLASS="n">9</SPAN>/<SPAN CLASS="i">$n</SPAN><SPAN CLASS="p">)</SPAN>]<SPAN CLASS="cm">,</SPAN>++<SPAN CLASS="i">$_</SPAN>%<SPAN CLASS="i">$W</SPAN>?<SPAN CLASS="i">$#</SPAN> <SPAN CLASS="co">:</SPAN> <SPAN CLASS="c">#$?W$%_$++,])n$/9*]0[0$(tni[c$tnirp;)0</SPAN>
<SPAN CLASS="q">&quot;\n&quot;</SPAN><SPAN CLASS="s">}</SPAN><SPAN CLASS="s">}</SPAN><SPAN CLASS="sc">;</SPAN><SPAN CLASS="i">sub f</SPAN><SPAN CLASS="s">{</SPAN><SPAN CLASS="p">(</SPAN><SPAN CLASS="i">$w</SPAN>/<SPAN CLASS="i">$W</SPAN>*<SPAN CLASS="p">(</SPAN><SPAN CLASS="i">$_</SPAN>[<SPAN CLASS="n">0</SPAN>]-<SPAN CLASS="p">(</SPAN><SPAN CLASS="i">$W</SPAN>-<SPAN CLASS="n">1</SPAN><SPAN CLASS="p">)</SPAN>/<SPAN CLASS="n">2</SPAN><SPAN CLASS="p">)</SPAN>*<SPAN CLASS="k">cos</SPAN><SPAN CLASS="p">(</SPAN><SPAN CLASS="i">$A</SPAN><SPAN CLASS="p">)</SPAN>+<SPAN CLASS="i">$h</SPAN>/<SPAN CLASS="i">$H</SPAN>*<SPAN CLASS="p">(</SPAN><SPAN CLASS="p">(</SPAN><SPAN CLASS="i">$H</SPAN>-<SPAN CLASS="n">1</SPAN><SPAN CLASS="p">)</SPAN>/<SPAN CLASS="n">2</SPAN>-<SPAN CLASS="i">$_</SPAN>[<SPAN CLASS="n">1</SPAN>]<SPAN CLASS="p">)</SPAN>*<SPAN CLASS="k">sin</SPAN><SPAN CLASS="p">(</SPAN><SPAN CLASS="i">$A</SPAN><SPAN CLASS="p">)</SPAN>+<SPAN CLASS="i">$x</SPAN><SPAN CLASS="cm">,</SPAN>
<SPAN CLASS="p">(</SPAN><SPAN CLASS="i">$_</SPAN>[<SPAN CLASS="n">0</SPAN>]-<SPAN CLASS="p">(</SPAN><SPAN CLASS="i">$W</SPAN>-<SPAN CLASS="n">1</SPAN><SPAN CLASS="p">)</SPAN>/<SPAN CLASS="n">2</SPAN><SPAN CLASS="p">)</SPAN>*-<SPAN CLASS="i">$w</SPAN>/<SPAN CLASS="i">$W</SPAN>*<SPAN CLASS="k">sin</SPAN><SPAN CLASS="p">(</SPAN><SPAN CLASS="i">$A</SPAN><SPAN CLASS="p">)</SPAN>+<SPAN CLASS="i">$h</SPAN>/<SPAN CLASS="i">$H</SPAN>*<SPAN CLASS="p">(</SPAN><SPAN CLASS="c">#(*H$/h$+)A$(nis*W$/w$-*)2/)1-W$(-]0[_$(</SPAN>
<SPAN CLASS="p">(</SPAN><SPAN CLASS="i">$H</SPAN>-<SPAN CLASS="n">1</SPAN><SPAN CLASS="p">)</SPAN>/<SPAN CLASS="n">2</SPAN>-<SPAN CLASS="i">$_</SPAN>[<SPAN CLASS="n">1</SPAN>]<SPAN CLASS="p">)</SPAN>*<SPAN CLASS="k">cos</SPAN><SPAN CLASS="p">(</SPAN><SPAN CLASS="i">$A</SPAN><SPAN CLASS="p">)</SPAN>+<SPAN CLASS="i">$y</SPAN><SPAN CLASS="p">)</SPAN><SPAN CLASS="s">}</SPAN><SPAN CLASS="sc">;</SPAN><SPAN CLASS="k">exit</SPAN> <SPAN CLASS="k">if</SPAN><SPAN CLASS="i">$e</SPAN>=~<SPAN CLASS="q">/q/</SPAN><SPAN CLASS="sc">;</SPAN><SPAN CLASS="k">BEGIN</SPAN><SPAN CLASS="s">{</SPAN><SPAN CLASS="k">push</SPAN><SPAN CLASS="i">@ARGV</SPAN><SPAN CLASS="cm">,</SPAN><SPAN CLASS="k">split</SPAN><SPAN CLASS="q">' '</SPAN><SPAN CLASS="cm">,</SPAN><SPAN CLASS="i">$ENV</SPAN>{<SPAN CLASS="w">TPJ</SPAN>}<SPAN CLASS="s">}</SPAN>
<SPAN CLASS="s">}</SPAN><SPAN CLASS="c">#)&gt;&lt;(elihw}tnirp;&quot;ujd:zhoCawHmn =WxAy&quot;{(&quot;\)*|@]^[;/:%&lt;'!_=&quot;y;/%Y$&lt;Y%X$&lt;X%/}/s;</SPAN>
</PRE>
<p>You already know how it works, so I'll just tell you the
only difference.
The two lines that are commented out are the ones that set and
print the prompt.</p>
<p>One last comment: contrary to what I say
<a href="fractal_03.html">here</a>, the <tt>X</tt> and <tt>Y</tt>
commands do not work (the variables are not even used!).
This <a href="../code/mj2.pl">feature-fixed version</a> and this
<a href="../code/mj3.pl">other one</a> correct the problem,
but remove the <tt>$ENV{TPJ}</tt> feature.</p>
<p align="center"> <a href="fractal_09.html">Previous</a> | <a href="index.html">Next</a></p><hr noshade>
<p align="right">
<span class="legal">
Copyright &copy; 2000-2001, Philippe "BooK" Bruhat.</span>
</p>
</body>
</html>

